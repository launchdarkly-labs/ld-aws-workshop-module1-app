!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){(function(global){global.QuickSightEmbedding=require("amazon-quicksight-embedding-sdk")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"amazon-quicksight-embedding-sdk":4}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_eventify2=_interopRequireDefault(require("./lib/eventify")),_constructEvent2=_interopRequireDefault(require("./lib/constructEvent")),_constants=require("./lib/constants"),_punycode2=_interopRequireDefault(require("punycode"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmbeddableDashboard=function(){function EmbeddableDashboard(options){if(function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EmbeddableDashboard),!options)throw new Error("options is required");if(!options.url)throw new Error("url is required");var url=options.url,container=options.container,parameters=options.parameters,errorCallback=options.errorCallback,loadCallback=options.loadCallback;if(this.url=url,container instanceof HTMLElement?this.container=container:"string"==typeof container&&(this.container=document.querySelector(container)),!this.container)throw new Error("can't find valid container");this.parameters=parameters,this.iframe=function(options){var width=options.width,height=options.height,loadingHeight=options.loadingHeight,url=options.url,scrolling=options.scrolling;height===_constants.DASHBOARD_SIZE_OPTIONS.AUTO_FIT&&(height=loadingHeight);var iframe=document.createElement("iframe");return iframe.className="quicksight-embedding-iframe",iframe.width=width||"100%",iframe.height=height||"100%",iframe.scrolling=scrolling||"no",iframe.onload=function sendInitialPostMessage(iframe,domain){null===iframe.contentWindow&&setTimeout(sendInitialPostMessage.bind(null,iframe,domain),100);var eventName=_constants.OUT_GOING_POST_MESSAGE_EVENT_NAMES.ESTABLISH_MESSAGE_CHANNEL,event=(0,_constructEvent2.default)(eventName);iframe.contentWindow.postMessage(event,domain)}.bind(null,iframe,url),iframe.src=function(options){var url=options.url,parameters=options.parameters,src=url+"&punyCodeEmbedOrigin="+_punycode2.default.encode(window.location.origin+"/");return parameters?function(url,parameters){var parameterStrings=Object.keys(parameters).map(function(name){var value=parameters[name],values=[].concat(value),encodedName=encodeURIComponent(name);return values.map(function(paramValue){return encodeURIComponent(paramValue)}).map(function(encodedValue){return"p."+encodedName+"="+encodedValue}).join("&")});return url+"#"+parameterStrings.join("&")}(src,parameters):src}(options),iframe}(options),(0,_eventify2.default)(this),"function"==typeof errorCallback&&this.on(_constants.CLIENT_FACING_EVENT_NAMES.error,errorCallback),"function"==typeof loadCallback&&this.on(_constants.CLIENT_FACING_EVENT_NAMES.load,loadCallback),window.addEventListener("message",function(event){if(event&&event.source===(this.iframe&&this.iframe.contentWindow)){var _event$data=event.data,eventName=_event$data.eventName,payload=_event$data.payload;if(this.trigger(_constants.CLIENT_FACING_EVENT_NAMES[eventName],payload),eventName===_constants.IN_COMING_POST_MESSAGE_EVENT_NAMES.RESIZE_EVENT)options.height===_constants.DASHBOARD_SIZE_OPTIONS.AUTO_FIT&&(this.iframe.height=payload.height)}}.bind(this),!1),this.getContainer=this.getContainer.bind(this),this.getParameters=this.getParameters.bind(this),this.getUrl=this.getUrl.bind(this),this.setParameters=this.setParameters.bind(this)}return _createClass(EmbeddableDashboard,[{key:"getUrl",value:function(){return this.url}},{key:"getContainer",value:function(){return this.container}},{key:"getParameters",value:function(){return this.parameters}},{key:"setParameters",value:function(parameters){var eventName=_constants.OUT_GOING_POST_MESSAGE_EVENT_NAMES.UPDATE_PARAMETER_VALUES,payload={parameters:parameters},event=(0,_constructEvent2.default)(eventName,payload);this.iframe.contentWindow.postMessage(event,this.url)}}]),EmbeddableDashboard}();exports.default=EmbeddableDashboard},{"./lib/constants":5,"./lib/constructEvent":6,"./lib/eventify":7,punycode:8}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_EmbeddableDashboard=require("./EmbeddableDashboard"),_EmbeddableDashboard2=(obj=_EmbeddableDashboard)&&obj.__esModule?obj:{default:obj};exports.default=function(options){var dashboard=new _EmbeddableDashboard2.default(options),container=dashboard.getContainer();return setTimeout(function(iframe,container){if(!iframe)throw new Error("iFrame is required");if(!container)throw new Error("container of iFrame is required");container.appendChild(iframe)}.bind(null,dashboard.iframe,container),0),dashboard}},{"./EmbeddableDashboard":2}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.embedDashboard=void 0;var obj,_embedDashboard=require("./embedDashboard"),_embedDashboard2=(obj=_embedDashboard)&&obj.__esModule?obj:{default:obj};exports.embedDashboard=_embedDashboard2.default},{"./embedDashboard":3}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.OUT_GOING_POST_MESSAGE_EVENT_NAMES={ESTABLISH_MESSAGE_CHANNEL:"establishMessageChannel",UPDATE_PARAMETER_VALUES:"updateParameterValues"},exports.IN_COMING_POST_MESSAGE_EVENT_NAMES={LOAD:"load",ERROR:"error",RESIZE_EVENT:"RESIZE_EVENT"},exports.CLIENT_FACING_EVENT_NAMES={load:"load",error:"error",RESIZE_EVENT:"resize"},exports.DASHBOARD_SIZE_OPTIONS={AUTO_FIT:"AutoFit"}},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(eventName,payload){if(new Set(Object.values(_constants.OUT_GOING_POST_MESSAGE_EVENT_NAMES)).has(eventName))return{eventName:eventName,clientType:"EMBEDDING",payload:payload};throw new Error("Unexpected eventName")};var _constants=require("./constants")},{"./constants":5}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(object){object||(object={});!function(object){["on","trigger","off"].forEach(function(keyword){if(keyword in object)throw new Error("Cannot eventify object that has `"+keyword+"()` method on it")})}(object);var listeners=new Map;return object.on=function(eventName,callback){var eventListeners=listeners.get(eventName);eventListeners||(eventListeners=new Set,listeners.set(eventName,eventListeners)),eventListeners.add(callback)},object.off=function(eventName,callback){if(!callback)return listeners.delete(eventName),object;var eventListeners=listeners.get(eventName);return eventListeners&&eventListeners.delete(callback),object},object.trigger=function(eventName){for(var _len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var eventListeners=listeners.get(eventName);eventListeners&&eventListeners.forEach(function(listener){return listener.apply(null,args)})},object}},{}],8:[function(require,module,exports){(function(global){!function(root){var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule="object"==typeof module&&module&&!module.nodeType&&module,freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal);var punycode,key,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(type){throw new RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";return 1<parts.length&&(result=parts[0]+"@",string=parts[1]),result+map((string=string.replace(regexSeparators,".")).split("."),fn).join(".")}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)55296<=(value=string.charCodeAt(counter++))&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function ucs2encode(array){return map(array,function(value){var output="";return 65535<value&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)}).join("")}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/damp):delta>>1,delta+=floor(delta/numPoints);baseMinusTMin*tMax>>1<delta;k+=base)delta=floor(delta/baseMinusTMin);return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var out,basic,j,index,oldi,w,k,digit,t,baseMinusT,codePoint,output=[],inputLength=input.length,i=0,n=initialN,bias=initialBias;for((basic=input.lastIndexOf(delimiter))<0&&(basic=0),j=0;j<basic;++j)128<=input.charCodeAt(j)&&error("not-basic"),output.push(input.charCodeAt(j));for(index=0<basic?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;inputLength<=index&&error("invalid-input"),codePoint=input.charCodeAt(index++),(base<=(digit=codePoint-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:base)||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,!(digit<(t=k<=bias?tMin:bias+tMax<=k?tMax:k-bias));k+=base)w>floor(maxInt/(baseMinusT=base-t))&&error("overflow"),w*=baseMinusT;bias=adapt(i-oldi,out=output.length+1,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT,output=[];for(inputLength=(input=ucs2decode(input)).length,n=initialN,bias=initialBias,j=delta=0;j<inputLength;++j)(currentValue=input[j])<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push(delimiter);handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)n<=(currentValue=input[j])&&currentValue<m&&(m=currentValue);for(m-n>floor((maxInt-delta)/(handledCPCountPlusOne=handledCPCount+1))&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if((currentValue=input[j])<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=base;!(q<(t=k<=bias?tMin:bias+tMax<=k?tMax:k-bias));k+=base)qMinusT=q-t,baseMinusT=base-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}if(punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})},toUnicode:function(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return punycode});else if(freeExports&&freeModule)if(module.exports==freeExports)freeModule.exports=punycode;else for(key in punycode)punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key]);else root.punycode=punycode}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);
